@page "/counter"

<h1>Counter</h1>

<p>Current count: @currentCount?.Value</p>

<button class="btn btn-primary" onclick="@IncrementCount">Click me</button>

@functions {

CounterData currentCount;

void IncrementCount()
{
    currentCount.Value++;
}

protected override async Task OnParametersSetAsync()
{
    await base.OnParametersSetAsync();
    try
    {
        currentCount = await Services.LifeCycle.GetAppState<CounterData>("Counter");
    }
    catch (Exception)
    {
        currentCount = new CounterData();
        Services.LifeCycle.AddToAppState("Counter", currentCount, 1);
    }
}

[Serializable]
class CounterData
{
    public int Value;
}
//
}
